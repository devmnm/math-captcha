(function () {
    'use strict';

    const config = {
        min: 0,
        max:100, // Largest number to use in math operations
        operationElem: document.getElementById('captcha-operation'),
        resultElem: document.getElementById('captcha-result')
    };

    function generateNumber(min, max){
        //
        /// Sanity checks
        if(typeof min === 'undefined' && typeof max === 'undefined'){
            return Math.random()
        } // else...
        if(typeof min !== 'number' && typeof max !== 'number'){
            return Math.random()
        } // else...
        if(typeof max !== 'number'){
            max = 0;
        }

        // Computer and return random number
        const num = Math.random() * (max - min) + min; // Reference: 
        return Math.floor(num)
    }

    const operations = {
        '+': function(op1, op2) { return op1 + op2 },
        '-': function(op1, op2) { return op1 - op2 },
        '*': function(op1, op2) { return op1 * op2 },
    };

    function isFormInvalid(captchaVal){
        let why = '';
        const theForm = this;

        if(theForm.name) why = isEmpty(theForm.elements.name.value);
        if(theForm.tel) why = isEmpty(theForm.elements.tel.value);
        if(theForm.url) why = isEmpty(theForm.elements.url.value);
        if(theForm.captcha) why = isCaptchaInvalid(theForm.elements.captcha.value, captchaVal);
        //else why = true

        console.log(!why);
        return !why // .indexOf('false') >= 0
    }

    function isEmpty(val){
        if(!val || val === '-1'){
            return true
        }
        else {
            return false
        }
    }

    function isCaptchaInvalid(input, answer){
        // alert(input + ',' + answer)
        return parseFloat(input) === parseFloat(answer)
    }

    // import createNumberFields from './create-number-fields'

    const operand1 = generateNumber(config.min, config.max);
    const operand2 = generateNumber(config.min, config.max);
    const operator = '+';

    config.operationElem.innerHTML = operand1 + ' ' + operator + ' ' + operand2;
    const result = operations[operator](operand1, operand2);
    console.log(result);

    const theForm = document.getElementById('form');
    theForm.addEventListener('submit', function(e){
        // e.preventDefault()
        if(isFormInvalid.call(theForm, result)){
            e.preventDefault();
            alert('Invalid');
            return false
        }else {
            return true
        }

    });

    // const answerDropdownElem = createNumberFields(config.min, result)
    // config.resultElem.appendChild(answerDropdownElem)

}());
//# sourceMappingURL=captcha.min.js.map
